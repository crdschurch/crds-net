# default build settings for int, preview deploys etc
[build]
  command = '''
    cd _pages && git pull origin _pages && cd ../ &&
    bundle exec rspec &&
    ./bin/contentful-redirects &&
    ./bin/netlify-redirector &&
    bundle exec jekyll crds &&
    bundle exec jekyll contentful -f &&
    bundle exec jekyll build -- --update-search-index &&
    bash ./cypress/kickOffCypress.sh
  '''

[context.branch-deploy.environment]
  CRDS_PEOPLE_DOMAIN = "crdspeople.netlify.com"
  CRDS_MAP_DOMAIN = "crdsmap.netlify.com"
  CRDS_ANGULAR_ENDPOINT = "development--crds-angular.netlify.com"
  CRDS_GROUP_LEADER_DOMAIN = "group-leader.netlify.com"

[context.deploy-preview.environment]
  CRDS_PEOPLE_DOMAIN = "crdspeople.netlify.com"
  CRDS_MAP_DOMAIN = "crdsmap.netlify.com"
  CRDS_ANGULAR_ENDPOINT = "development--crds-angular.netlify.com"
  CRDS_GROUP_LEADER_DOMAIN = "demo-group-leader.netlify.com"

[context.development.environment]
  CRDS_PEOPLE_DOMAIN = "crdspeople.netlify.com"
  CRDS_MAP_DOMAIN = "crdsmap.netlify.com"
  CRDS_ANGULAR_ENDPOINT = "development--crds-angular.netlify.com"
  CRDS_GROUP_LEADER_DOMAIN = "dev-group-leader.netlify.com"

[context.release.environment]
  CRDS_PEOPLE_DOMAIN = "crdspeople.netlify.com"
  CRDS_MAP_DOMAIN = "crdsmap.netlify.com"
  CRDS_ANGULAR_ENDPOINT = "release--crds-angular.netlify.com"
  CRDS_GROUP_LEADER_DOMAIN = "demo-group-leader.netlify.com"

[context.master.environment]
  CRDS_PEOPLE_DOMAIN = "crds-people-prod.netlify.com"
  CRDS_MAP_DOMAIN = "crds-map-prod.netlify.com"
  CRDS_ANGULAR_ENDPOINT = "crds-angular.netlify.com"
  CRDS_GROUP_LEADER_DOMAIN = "group-leader.netlify.com"
